<div class="w-11/12 max-w-7xl mx-auto py-8">
  <div class="flex flex-col lg:flex-row gap-8 items-center mb-10">
    <div class="flex-1 text-center lg:text-left">
      <h1 class="text-3xl md:text-4xl font-black tracking-tight text-text-light dark:text-text-dark mb-4">Custom Budget</h1>
      <p class="text-slate-500 dark:text-slate-400 text-base md:text-lg leading-relaxed max-w-xl mx-auto lg:mx-0">
        Your project is unique, and your quote should be too. Use this section to request a
        tailored valuation where we focus strictly on the functionalities that drive value
        for your brand.
      </p>
    </div>

    <div class="w-full sm:w-auto sm:min-w-[320px]">
      <div class="bg-card-light dark:bg-card-dark border border-slate-200 dark:border-slate-700 rounded-2xl shadow-xl overflow-hidden">
        <div class="bg-primary/5 dark:bg-primary/10 px-6 py-3 border-b border-slate-200 dark:border-slate-700">
          <p class="text-xs font-semibold uppercase tracking-widest text-slate-500 dark:text-slate-400">Budget Summary</p>
        </div>
        <div class="p-6">
          <div class="flex items-center justify-between gap-6 mb-4">
            <div>
              <p class="text-sm text-slate-500 dark:text-slate-400 mb-1">Estimated Total</p>
              <p class="text-xs text-slate-400 dark:text-slate-500">Taxes not included</p>
            </div>
            <div class="text-right">
              <p class="text-4xl font-black text-primary tracking-tight">{{ totalPrice() }}<span class="text-xl ml-1">â‚¬</span></p>
            </div>
          </div>
          <app-button
            label="Request Budget"
            type="successful"
            [disabled]="totalPrice() === 0"
            [fullWidth]="true"
            (click)="openRequestModal()"
          />
        </div>
      </div>
    </div>
  </div>

  <!-- ServicesList -->
  <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
    @for (service of servicesList; track service.id) {
      <app-service-card
        [service]="service"
        (onUpdateService)="updateServiceOptions($event)"
      />
    }
  </div>
</div>

<p-dialog
  [(visible)]="showRequestModal"
  [modal]="true"
  [closable]="true"
  [draggable]="false"
  [resizable]="false"
  [style]="{ width: '450px' }"
  [breakpoints]="{ '576px': '90vw' }"
  styleClass="budget-request-dialog"
>
  <ng-template pTemplate="header">
    <div class="flex flex-col gap-1">
      <span class="text-xl font-bold text-text-light dark:text-text-dark">Request Your Budget</span>
      <span class="text-sm text-slate-500 dark:text-slate-400">Fill in your details to receive your personalized quote</span>
    </div>
  </ng-template>

  <app-budget-request-form
    (onBudgetRequest)="saveBudget($event)"
  />
</p-dialog>
